{"version":3,"file":"index.js","sources":["../src/models/index.ts","../src/index.tsx"],"sourcesContent":["export enum StepStates {\n  NOT_STARTED = 'not_started',\n  CURRENT = 'current',\n  ERROR = 'error',\n  COMPLETED = 'completed'\n}\n\nexport interface ProgressStep {\n  label: string;\n  name: string;\n  state?: StepStates;\n  content: React.ReactNode;\n  validator?: (payload?: any) => boolean;\n}\n\nexport interface StepProgressProps {\n  steps: ProgressStep[];\n  startingStep: number;\n  wrapperClass?: string;\n  progressClass?: string;\n  stepClass?: string;\n  contentClass?: string;\n  buttonWrapperClass?: string;\n  primaryBtnClass?: string;\n  secondaryBtnClass?: string;\n}\n\nexport interface ReducerAction {\n  type: string;\n  payload: { index: number; state: StepStates };\n}\n","import * as React from 'react';\nimport styles from './styles.module.css';\n\nimport { StepStates, ProgressStep, StepProgressProps, ReducerAction } from './models';\n\nfunction stepsReducer(steps: ProgressStep[], action: ReducerAction): ProgressStep[] {\n\n  return steps.map(function(step, i) {\n\n    if (i < action.payload.index) {\n      return { ...step, state: StepStates.COMPLETED };\n    } else if (i === action.payload.index) {\n      return { ...step, state: action.payload.state };\n    } else {\n      step.state = StepStates.NOT_STARTED;\n      return step;\n    }\n  });\n}\n\nfunction StepProgressBar(props: StepProgressProps): JSX.Element {\n  const {\n    steps,\n    startingStep,\n    wrapperClass,\n    progressClass,\n    stepClass,\n    contentClass,\n    buttonWrapperClass,\n    primaryBtnClass,\n    secondaryBtnClass\n  } = props;\n  const [state, dispatch] = React.useReducer(stepsReducer, steps);\n  const [currentIndex, setCurrentIndex] = React.useState(startingStep);\n\n  React.useEffect(function () {\n    dispatch({\n      type: 'init',\n      payload: { index: currentIndex, state: StepStates.CURRENT }\n    });\n  }, []);\n\n  function nextHandler(): void {\n    let isStateValid = true;\n    const stepValidator = state[currentIndex].validator;\n\n    if (stepValidator) {\n      isStateValid = stepValidator();\n    }\n    dispatch({\n      type: 'next',\n      payload: {\n        index: isStateValid ? currentIndex + 1 : currentIndex,\n        state: isStateValid ? StepStates.CURRENT : StepStates.ERROR\n      }\n    });\n\n    if (isStateValid) {\n      setCurrentIndex(currentIndex + 1);\n    }\n  }\n\n  function prevHandler(): void {\n    dispatch({\n      type: 'previous',\n      payload: {\n        index: currentIndex - 1,\n        state: StepStates.CURRENT\n      }\n    });\n    setCurrentIndex(currentIndex - 1);\n  }\n\n  return (\n    <div className={`${styles['progress-bar-wrapper']} ${wrapperClass || ''}`}>\n      <ul className={`${styles['step-progress-bar']} ${progressClass || ''}`}>\n        {state.map(function(step, i) {\n          return (\n            <li\n              key={i}\n              className={`${\n                styles['progress-step']\n              }${\n                step.state === StepStates.COMPLETED ? ` ${styles.completed}` : ''\n              }${\n                step.state === StepStates.CURRENT ? ` ${styles.current}` : ''\n              }${\n                step.state === StepStates.ERROR ? ` ${styles['has-error']}` : ''\n              } ${\n                stepClass || ''\n              }`}\n            >\n              {step.state === StepStates.COMPLETED && (\n                <span className={styles['step-icon']}>\n                  <svg\n                    width=\"1.5rem\"\n                    viewBox=\"0 0 13 9\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path d=\"M1 3.5L4.5 7.5L12 1\" stroke=\"white\" stroke-width=\"1.5\"></path>\n                  </svg>\n                </span>\n              )}\n              {step.state === StepStates.ERROR && <span className={styles['step-icon']}>!</span>}\n              {step.state !== StepStates.COMPLETED && step.state !== StepStates.ERROR && (\n                <span className={styles['step-index']}>{i + 1}</span>\n              )}\n              <span className={styles['step-label']}>{step.label}</span>\n            </li>\n          );\n        })}\n      </ul>\n\n      <div className={`${styles['step-content']} ${contentClass || ''}`}>\n        {state[currentIndex].content}\n      </div>\n\n      <div className={`${styles['step-buttons']} ${buttonWrapperClass || ''}`}>\n        <a\n          className={`${\n            styles['step-action-btn']\n          } ${\n            styles['action-btn-secondary']\n          } ${\n            currentIndex === 0 ? styles.disabled : ''\n          } ${\n            secondaryBtnClass || ''\n          }`}\n          onClick={prevHandler}\n        >\n          Previous\n        </a>\n        <a\n          className={`${\n            styles['step-action-btn']\n          } ${\n            styles['action-btn-primary']\n          } ${\n            currentIndex === state.length - 1 ? styles.disabled : ''\n          } ${\n            primaryBtnClass || ''\n          }`}\n          onClick={nextHandler}\n        >\n          Next\n        </a>\n      </div>\n    </div>\n  );\n}\n\nexport default StepProgressBar;\n"],"names":["StepStates","stepsReducer","steps","action","map","step","i","payload","index","state","COMPLETED","NOT_STARTED","StepProgressBar","props","startingStep","wrapperClass","progressClass","stepClass","contentClass","buttonWrapperClass","primaryBtnClass","secondaryBtnClass","React","dispatch","currentIndex","setCurrentIndex","type","CURRENT","nextHandler","isStateValid","stepValidator","validator","ERROR","prevHandler","className","styles","key","completed","current","width","viewBox","fill","xmlns","d","stroke","label","content","disabled","onClick","length"],"mappings":"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"}